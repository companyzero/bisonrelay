# root directory for brserver settings, logs etc
root = ~/.brserver

# dir where routed messages are stored
routedmessages = ~/.brserver/routedmessages

# dir where paid RVs that can be subscribed to are stored
paidrvs = ~/.brserver/paidrvs

# comma-separated list of addresses to listen for connections
listen = 127.0.0.1:443

# Postgres config options
[postgres]

# Whether to use the postgresql backend for data. 'yes' or 'no'.
enabled = no

# Postgres connection info. The database and roles must have been manually
# created beforehand.
#
# Note: host can be set to a dir that contains a PG server unix socket (for
# example: '/var/run/postgresql'). Depending on the specific server
# configuration, the passphrase may or may not be needed.

host = 127.0.0.1
port = 5432
dbname = brdata
role = brdata
# pass = brdata

# Path to server.crt for SSL authentication. When blank, an unencrypted
# connection is used.
# serverca =

# Names of the tablespaces to use for storing index and bulk data
# (respectively). They need to be manually setup in the Postgres database
# with:
#
# CREATE TABLESPACE frindex OWNER frdata LOCATION '/path/to/index_data';
# CREATE TABLESPACE frbulk OWNER frdata LOCATION '/path/to/bulk_data';
#
# Replacing "brindex", "brbulk", "brdata" and the path with appropriate values.
indexts = brindex
bulkts = brbulk

# replication
# slotname = "slot_br1"
# cmdpromote = "/path/to/promote.sh"
# cmddemote = "/path/to/demote.sh"

# logging and debug
[log]

# logfile contains log file name location
logfile = ~/.brserver/brserver.log

# debuglevel for various subsystems
debuglevel = info

# launch go's profiler on specified url
# requires debug = yes
profiler = 127.0.0.1:6060

# Policy section
[policy]

# How many days after which expire data in the server.
expirationdays = 7

# How long (in seconds) a push payment is valid for.
# pushpaymentlifetime = 86400

# Maximum number of outstanding (unpaid) push invoices a client may request.
# maxpushinvoices = 8

# Which version of max message size to use. Versions:
# 0: Max 1 MiB payload per msg.
# maxmsgsizeversion = 0

# How long (in time.Duration format) to wait for pings from clients before
# disconnecting.
# pinglimit = 5m

# The following payment rates are arelated to RTDT (realtime) chat rooms.

# How much to pay for creating a session: fixed minimum amount plus a per-user
# rate (total for a new session will be `rtmatomspersess + size *
# rtmatomsperusersess`).
#
# rtmatomspersess = 1000
# rtmatomsperusersess = 100

# How much the admin pays to create "appointment cookies" (a cookie that allows
# end-users to get server appointments to join a session). Fixed minimum amount
# plus a per-user amount (when batching many calls).
#
# rtmatomsgetcookie = 1000
# rtmatomsperusercookie = 100

# How much an end-user pays for a join cookie (a cookie that allows it to join
# and optionally publish data in the RT session). Fixed minimum amount plus a
# per-user-session-megabyte_unit amount (similar to how the rate for messages
# work).
#
# The payment needed to send X MB of data in a session of a given `size`
# (number of users) will be calculated as:
#
#      rtmatomsjoinsess + (size * X * rtmatomspushrate) / rtpushratembytes
#
# NOTE: spectators must pay `rtmatomsjoinsess` MAtoms to join the live session,
# even if they won't send any data (in that case, the rest of the equation will
# be equal to zero).
#
# rtmatomsjoinsess = 1000
# rtmatomspushrate = 100
# rtpushratembytes = 1

# Payment options
[payment]

# Payment method (free, dcrln).
scheme = free

# Host of an unlocked dcrlnd instance
#lnrpchost = localhost:20000

# Cert path of the dcrlnd instance
#lntlscert = ~/dcrlndsimnetnodes/dcrlnd0/tls.cert

# Path to a valid macaroon file
#lnmacaroonpath = ~/dcrlndsimnetnodes/dcrlnd0/chain/decred/simnet/admin.macaroon

# Rate to charge for pushed bytes (per push unit, below).
# pushrateatoms = 0.100

# How many bytes in the push rate calc (i.e. how many bytes). The calc for
# push pay rate is (simplifed):
#
#    pay_amount = size / pushratebytes * pushrateatoms
#
# a pushratebytes of 1000 is 1 KB, 1000000 is 1 MB, etc.
#
# pushratebytes = 1

# Rate to charge for individual subscriptions
# atomspersub = 1

[rtdt]

# Address to appoint as RTDT server address to clients whenever they request a
# join cookie.
#
# serveraddress = example.com:1234

# Cookie key (in hexadecimal format). MUST be shared with brrtdt server.
#
# cookiekey = 0000000000000000000000000000000000000000000000000000000000000000

# Path to RTDT server's SNTRUP public key.
#
# serverpub = /path/to/server.key.pub

# Comma-separated list of additional keys that the server may use to attempt to
# decode server and appointment cookies. This is used when the main cookiekey
# needs to be rotated: the old key is appended here (to allow brserver to
# decode cookies from old sessions that have not yet upgraded) and cookiekey is
# updated with the new key.
#
# decodecookiekeys =

[seeder]

# host = 127.0.0.1:4321
# token = <use token configured in seeder>
# disable = 0
# dryrun = 0
# insecure = 0
